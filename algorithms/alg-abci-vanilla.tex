% Vanilla ABCI - alg1
\begin{figure}[t!]
  \begin{adjustbox}{minipage=[t]{\columnwidth}}
    \begin{algorithm}[H]
      \renewcommand{\thealgorithm}{ABCI Vanilla}         
      \caption{}%
      \label{alg:abci-vanilla}%
      \small
      \begin{algorithmic}[1]
            \State \textbf{Init:} \texttt{epoch} $\leftarrow$ \textbf{0}, \texttt{history} $\leftarrow$ \{\}

            \Function{\<CheckTx>}{$transaction$}\label{alg:van_check_tx}
                \State \textbf{return} \Call{\<isValidTransaction>}{$transaction$}
            \EndFunction
      
            \Function{\<DeliverTx>}{$transaction$}\label{alg:van_deliver_tx}
                \If {\Call{\<isValidTransaction>}{$transaction$}}
                		\State \<element> $\leftarrow$ \Call{\<getElementFromTransaction>}{$transaction$}
                		\State  \texttt{history[epoch]} \(<- \, \texttt{history}[\texttt{epoch}] \cup \<element>\)
                	\EndIf
                	\State \textbf{return}
            \EndFunction
            
            \Function{\<EndBlock>}{\null}\label{alg:van_end_block}
            		\State \texttt{hash} $\leftarrow$ \<Hash>(\texttt{history[epoch]}, \texttt{epoch})
            		\Comment{Calcular el hash de la época.}
                \State \texttt{epochProof} $\leftarrow$  \texttt{Sign(\texttt{hash}, privateKey)}
                \State \Call{\<add>}{\texttt{epochProof}}
                \State \(\<epoch> \, <- \<epoch> + 1\)
                \Comment{Cada bloque de Tendermint define una época.}
                \State \textbf{return}
            \EndFunction
            
             \Function{\<Query>}{\null}\label{alg:van_query}
                \State \textbf{return} (\texttt{history}, \texttt{history} up to \<epoch>\ - 1, \<epoch>\ - 1)            
             \EndFunction
            
            \Function{\<isValidTransaction>}{$transaction$}\label{alg:van_is_valid_tx}
                \State \<element> $\leftarrow$ \Call{\<getElementFromTransaction>}{$transaction$}
                \State \textbf{return} \<isValidElement>(\<element>)
            \EndFunction
            
            \Function{\<getElementFromTransaction>}{$transaction$}\label{alg:van_get_element}
                \State \textbf{return} $transaction$
            \EndFunction
        \end{algorithmic}
      \end{algorithm}
	\end{adjustbox}
  \end{figure}
