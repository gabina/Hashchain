% Brotli Collector - alg2
\begin{figure}[t!]
  \begin{adjustbox}{minipage=[t]{\columnwidth}}
    \begin{algorithm}[H]
      \renewcommand{\thealgorithm}{Compress Collector}         
      \caption{}%
      \label{alg:collector-brotli}%
      \small
      \begin{algorithmic}[1]
            \State \textbf{Init:} \texttt{batch} $\leftarrow$ \{\}
      
            \Function{\<AddElement>}{$element$}\label{alg:brotli_add_tx}
            		\If {\<isValidElement>($element$)}
            			\State \texttt{encodedElement} $\leftarrow$ \texttt{RLP.Encode}($element$)
					\State \texttt{batch} $\leftarrow$ \texttt{batch} $\cup$ \texttt{encodedElement}
            
             		\If {\<isReady>(\<batch>)}
             			\State \texttt{compressedBatch} $\leftarrow$  \texttt{Brotli.Compress}(\texttt{batch})
                			\State \texttt{Tendermint.Broadcast}(\texttt{compressedBatch})
                			\State \Call{\<reset>}{\null}
             	   \EndIf
             	\EndIf
                	
                \State \textbf{return}
            \EndFunction
            
            \Function{\<reset>}{\null}\label{alg:brotli_reset}
            		\State \texttt{batch} $\leftarrow$ \{\}
                \State \textbf{return}
            \EndFunction
        \end{algorithmic}
      \end{algorithm}
	\end{adjustbox}
  \end{figure}

